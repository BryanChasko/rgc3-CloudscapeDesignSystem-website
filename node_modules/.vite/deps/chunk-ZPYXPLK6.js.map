{
  "version": 3,
  "sources": ["../../src/internal/plugins/helpers/use-discovered-action.tsx", "../../src/internal/plugins/helpers/runtime-content-wrapper.tsx", "../../src/internal/plugins/controllers/drawers.ts", "../../src/internal/plugins/helpers/utils.ts", "../../src/internal/plugins/controllers/action-buttons.ts", "../../src/internal/plugins/api.ts"],
  "sourcesContent": ["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef, useState } from 'react';\nimport { ActionButtonsController, ActionConfig, ActionContext } from '../controllers/action-buttons';\nimport { RuntimeContentWrapper } from './runtime-content-wrapper';\n\nfunction convertRuntimeAction(action: ActionConfig | null, context: ActionContext) {\n  if (!action) {\n    return null;\n  }\n  return (\n    <RuntimeContentWrapper\n      key={action.id + '-' + context.type}\n      mountContent={container => action.mountContent(container, context)}\n      unmountContent={container => action.unmountContent(container)}\n    />\n  );\n}\n\nexport function createUseDiscoveredAction(onActionRegistered: ActionButtonsController['onActionRegistered']) {\n  return function useDiscoveredAction(type: string) {\n    const [discoveredActions, setDiscoveredActions] = useState<Array<React.ReactNode>>([]);\n    const headerRef = useRef<HTMLDivElement>(null);\n    const contentRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n      return onActionRegistered(actions => {\n        setDiscoveredActions(actions.map(action => convertRuntimeAction(action, { type, headerRef, contentRef })));\n      });\n    }, [type]);\n\n    return { discoveredActions, headerRef, contentRef };\n  };\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef } from 'react';\n\ninterface RuntimeContentWrapperProps {\n  mountContent: (container: HTMLElement) => void;\n  unmountContent: (container: HTMLElement) => void;\n}\n\nexport function RuntimeContentWrapper({ mountContent, unmountContent }: RuntimeContentWrapperProps) {\n  const ref = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const container = ref.current!;\n    mountContent(container);\n    return () => unmountContent(container);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return <div ref={ref}></div>;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport debounce from '../../debounce';\nimport { NonCancelableEventHandler } from '../../events';\n\nexport interface DrawerConfig {\n  id: string;\n  ariaLabels: {\n    content?: string;\n    closeButton?: string;\n    triggerButton?: string;\n    resizeHandle?: string;\n  };\n  badge?: boolean;\n  resizable?: boolean;\n  defaultSize?: number;\n  onResize?: NonCancelableEventHandler<{ size: number; id: string }>;\n  orderPriority?: number;\n  defaultActive?: boolean;\n  trigger: {\n    iconSvg: string;\n  };\n  mountContent: (container: HTMLElement) => void;\n  unmountContent: (container: HTMLElement) => void;\n}\n\nexport type DrawersRegistrationListener = (drawers: Array<DrawerConfig>) => void;\n\nexport interface DrawersApiPublic {\n  registerDrawer(config: DrawerConfig): void;\n}\n\nexport interface DrawersApiInternal {\n  clearRegisteredDrawers(): void;\n  onDrawersRegistered(listener: DrawersRegistrationListener): () => void;\n}\n\nexport class DrawersController {\n  private drawers: Array<DrawerConfig> = [];\n  private drawersRegistrationListener: DrawersRegistrationListener | null = null;\n\n  scheduleUpdate = debounce(() => {\n    this.drawersRegistrationListener?.(this.drawers);\n  }, 0);\n\n  registerDrawer = (config: DrawerConfig) => {\n    this.drawers = this.drawers.concat(config);\n    this.scheduleUpdate();\n  };\n\n  onDrawersRegistered = (listener: DrawersRegistrationListener) => {\n    if (this.drawersRegistrationListener !== null) {\n      console.warn('[AwsUi] [runtime drawers] multiple app layout instances detected');\n    }\n    this.drawersRegistrationListener = listener;\n    this.scheduleUpdate();\n    return () => {\n      this.drawersRegistrationListener = null;\n    };\n  };\n\n  clearRegisteredDrawers = () => {\n    this.drawers = [];\n  };\n\n  installPublic(api: Partial<DrawersApiPublic> = {}): DrawersApiPublic {\n    api.registerDrawer ??= this.registerDrawer;\n    return api as DrawersApiPublic;\n  }\n\n  installInternal(internalApi: Partial<DrawersApiInternal> = {}): DrawersApiInternal {\n    internalApi.clearRegisteredDrawers ??= this.clearRegisteredDrawers;\n    internalApi.onDrawersRegistered ??= this.onDrawersRegistered;\n    return internalApi as DrawersApiInternal;\n  }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function sortByPriority<T extends { orderPriority?: number; id: string }>(items: Array<T>) {\n  return items.slice().sort((a, b) => {\n    if (b.orderPriority !== a.orderPriority) {\n      return Math.sign((b.orderPriority ?? 0) - (a.orderPriority ?? 0));\n    }\n    return b.id < a.id ? 1 : -1;\n  });\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport debounce from '../../debounce';\nimport { sortByPriority } from '../helpers/utils';\n\n// this code should not depend on React typings, because it is portable between major versions\ninterface RefShim<T> {\n  current: T | null;\n}\n\nexport interface ActionContext {\n  type: string;\n  headerRef: RefShim<HTMLElement>;\n  contentRef: RefShim<HTMLElement>;\n}\n\nexport interface ActionConfig {\n  id: string;\n  orderPriority?: number;\n  mountContent: (container: HTMLElement, context: ActionContext) => void;\n  unmountContent: (container: HTMLElement) => void;\n}\n\nexport type ActionRegistrationListener = (action: Array<ActionConfig>) => void;\n\nexport interface ActionsApiPublic {\n  registerAction(config: ActionConfig): void;\n}\n\nexport interface ActionsApiInternal {\n  clearRegisteredActions(): void;\n  onActionRegistered(listener: ActionRegistrationListener): () => void;\n}\n\nexport class ActionButtonsController {\n  private listeners: Array<ActionRegistrationListener> = [];\n  private actions: Array<ActionConfig> = [];\n\n  private scheduleUpdate = debounce(() => {\n    this.listeners.forEach(listener => listener(this.actions));\n  }, 0);\n\n  registerAction = (action: ActionConfig) => {\n    this.actions.push(action);\n    this.actions = sortByPriority(this.actions);\n    this.scheduleUpdate();\n  };\n\n  clearRegisteredActions = () => {\n    this.actions = [];\n  };\n\n  onActionRegistered = (listener: ActionRegistrationListener) => {\n    this.listeners.push(listener);\n    this.scheduleUpdate();\n    return () => {\n      this.listeners = this.listeners.filter(item => item !== listener);\n    };\n  };\n\n  installPublic(api: Partial<ActionsApiPublic> = {}): ActionsApiPublic {\n    api.registerAction ??= this.registerAction;\n    return api as ActionsApiPublic;\n  }\n\n  installInternal(internalApi: Partial<ActionsApiInternal> = {}): ActionsApiInternal {\n    internalApi.clearRegisteredActions ??= this.clearRegisteredActions;\n    internalApi.onActionRegistered ??= this.onActionRegistered;\n    return internalApi as ActionsApiInternal;\n  }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { DrawersApiInternal, DrawersApiPublic, DrawersController } from './controllers/drawers';\nimport { ActionsApiInternal, ActionsApiPublic, ActionButtonsController } from './controllers/action-buttons';\n\nconst storageKey = Symbol.for('awsui-plugin-api');\n\ninterface AwsuiApi {\n  awsuiPlugins: {\n    appLayout: DrawersApiPublic;\n    alert: ActionsApiPublic;\n    flashbar: ActionsApiPublic;\n  };\n  awsuiPluginsInternal: {\n    appLayout: DrawersApiInternal;\n    alert: ActionsApiInternal;\n    flashbar: ActionsApiInternal;\n  };\n}\n\ninterface WindowWithApi extends Window {\n  [storageKey]: AwsuiApi;\n}\n\nfunction findUpApi(currentWindow: WindowWithApi): AwsuiApi | undefined {\n  try {\n    if (currentWindow?.[storageKey]) {\n      return currentWindow[storageKey];\n    }\n\n    if (!currentWindow || currentWindow.parent === currentWindow) {\n      // When the window has no more parents, it references itself\n      return undefined;\n    }\n\n    return findUpApi(currentWindow.parent as WindowWithApi);\n  } catch (ex) {\n    // Most likely a cross-origin access error\n    return undefined;\n  }\n}\n\nexport function loadApi() {\n  if (typeof window === 'undefined') {\n    return installApi({});\n  }\n  const win = window as unknown as WindowWithApi;\n  const existingApi = findUpApi(win);\n  win[storageKey] = installApi(existingApi ?? {});\n  return win[storageKey];\n}\n\nexport const { awsuiPlugins, awsuiPluginsInternal } = loadApi();\n\ntype DeepPartial<T> = T extends (...args: any) => any ? T : { [P in keyof T]?: DeepPartial<T[P]> };\n\nfunction installApi(api: DeepPartial<AwsuiApi>): AwsuiApi {\n  api.awsuiPlugins ??= {};\n  api.awsuiPluginsInternal ??= {};\n\n  const appLayoutDrawers = new DrawersController();\n  api.awsuiPlugins.appLayout = appLayoutDrawers.installPublic(api.awsuiPlugins.appLayout);\n  api.awsuiPluginsInternal.appLayout = appLayoutDrawers.installInternal(api.awsuiPluginsInternal.appLayout);\n\n  const alertActions = new ActionButtonsController();\n  api.awsuiPlugins.alert = alertActions.installPublic(api.awsuiPlugins.alert);\n  api.awsuiPluginsInternal.alert = alertActions.installInternal(api.awsuiPluginsInternal.alert);\n\n  const flashbarActions = new ActionButtonsController();\n  api.awsuiPlugins.flashbar = flashbarActions.installPublic(api.awsuiPlugins.flashbar);\n  api.awsuiPluginsInternal.flashbar = flashbarActions.installInternal(api.awsuiPluginsInternal.flashbar);\n\n  return api as AwsuiApi;\n}\n"],
  "mappings": "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",
  "names": ["import_react", "React", "React"]
}
