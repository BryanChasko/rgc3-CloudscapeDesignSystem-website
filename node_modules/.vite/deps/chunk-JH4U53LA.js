import {
  browserScrollbarSize
} from "./chunk-2DINTSCD.js";
import {
  InternalHeader
} from "./chunk-QM645ISK.js";
import {
  CollectionLabelContext
} from "./chunk-XFXLI6GJ.js";
import {
  FormFieldContext
} from "./chunk-RGNJKKON.js";
import {
  InfoLinkLabelContext
} from "./chunk-U4MR2ZVK.js";
import {
  ModalContext
} from "./chunk-NVHTWOY2.js";
import {
  LinkDefaultVariantContext,
  defaultValue as defaultValue2
} from "./chunk-CGX6IJLX.js";
import {
  useContainerBreakpoints
} from "./chunk-BESADZDS.js";
import {
  AppLayoutContext,
  defaultValue as defaultValue3
} from "./chunk-KGTDQHUA.js";
import {
  useContainerQuery
} from "./chunk-BQ3I4KFU.js";
import {
  Portal
} from "./chunk-TT4W3QW4.js";
import {
  focus_lock_default
} from "./chunk-WS7XJ5RY.js";
import {
  useInternalI18n
} from "./chunk-VCW6C342.js";
import {
  ButtonContext,
  InternalButton
} from "./chunk-DPGYCRGF.js";
import {
  SingleTabStopNavigationContext,
  defaultValue
} from "./chunk-KYLY6TIG.js";
import {
  fireNonCancelableEvent
} from "./chunk-T3BYYNEM.js";
import {
  FunnelNameSelectorContext,
  useFunnelSubStep
} from "./chunk-GC32QG33.js";
import {
  useUniqueId
} from "./chunk-3TE4OIE4.js";
import {
  useMergeRefs
} from "./chunk-NYW4WZSZ.js";
import {
  KeyCode,
  __rest,
  clsx_m_default,
  getBaseProps,
  useVisualRefresh
} from "./chunk-CHBULPAM.js";
import {
  __toESM,
  require_react
} from "./chunk-S2TLTWWO.js";

// node_modules/@cloudscape-design/components/modal/internal.js
var import_react3 = __toESM(require_react());

// node_modules/@cloudscape-design/components/modal/styles.css.js
import "/home/bryanchasko/code/rgc3/node_modules/@cloudscape-design/components/modal/styles.scoped.css";
var styles_css_default = {
  "dialog": "awsui_dialog_1d2i7_exyuv_111",
  "modal-slide-up": "awsui_modal-slide-up_1d2i7_exyuv_1",
  "awsui-motion-fade-in-0": "awsui_awsui-motion-fade-in-0_1d2i7_exyuv_1",
  "refresh": "awsui_refresh_1d2i7_exyuv_134",
  "awsui-motion-scale-popup": "awsui_awsui-motion-scale-popup_1d2i7_exyuv_1",
  "root": "awsui_root_1d2i7_exyuv_167",
  "awsui-motion-fade-in": "awsui_awsui-motion-fade-in_1d2i7_exyuv_1",
  "hidden": "awsui_hidden_1d2i7_exyuv_251",
  "focus-lock": "awsui_focus-lock_1d2i7_exyuv_255",
  "small": "awsui_small_1d2i7_exyuv_275",
  "medium": "awsui_medium_1d2i7_exyuv_278",
  "large": "awsui_large_1d2i7_exyuv_281",
  "max": "awsui_max_1d2i7_exyuv_284",
  "breakpoint-xs": "awsui_breakpoint-xs_1d2i7_exyuv_284",
  "container": "awsui_container_1d2i7_exyuv_290",
  "content": "awsui_content_1d2i7_exyuv_334",
  "no-paddings": "awsui_no-paddings_1d2i7_exyuv_339",
  "header": "awsui_header_1d2i7_exyuv_344",
  "header--text": "awsui_header--text_1d2i7_exyuv_356",
  "footer": "awsui_footer_1d2i7_exyuv_360",
  "footer--stuck": "awsui_footer--stuck_1d2i7_exyuv_369",
  "dismiss-control": "awsui_dismiss-control_1d2i7_exyuv_381",
  "modal-open": "awsui_modal-open_1d2i7_exyuv_385"
};

// node_modules/@cloudscape-design/components/modal/body-scroll.js
var initialBodyPaddingRightStyle = void 0;
function disableBodyScrolling() {
  setBodyScrollbarPadding();
  document.body.classList.add(styles_css_default["modal-open"]);
}
function enableBodyScrolling() {
  document.body.classList.remove(styles_css_default["modal-open"]);
  restoreBodyScrollbarPadding();
}
function setBodyScrollbarPadding() {
  if (bodyHasScrollbar()) {
    initialBodyPaddingRightStyle = document.body.style.paddingRight;
    const initialBodyPaddingRight = computedBodyPaddingRightPixels();
    const scrollbarWidth = browserScrollbarSize().width;
    const newBodyPaddingRight = initialBodyPaddingRight + scrollbarWidth;
    document.body.style.paddingRight = newBodyPaddingRight + "px";
  }
}
function computedBodyPaddingRightPixels() {
  return parseInt(window.getComputedStyle(document.body).paddingRight, 10);
}
function restoreBodyScrollbarPadding() {
  if (initialBodyPaddingRightStyle) {
    document.body.style.setProperty("padding-right", initialBodyPaddingRightStyle);
  } else {
    document.body.style.removeProperty("padding-right");
  }
  initialBodyPaddingRightStyle = void 0;
}
function bodyHasScrollbar() {
  return document.body.clientWidth < window.innerWidth;
}

// node_modules/@cloudscape-design/components/internal/hooks/use-intersection-observer/index.js
var import_react = __toESM(require_react());
function useIntersectionObserver() {
  const observerRef = (0, import_react.useRef)(null);
  const [isIntersecting, setIsIntersecting] = (0, import_react.useState)(false);
  const ref = (0, import_react.useCallback)((targetElement) => {
    if (typeof IntersectionObserver === "undefined") {
      return;
    }
    if (observerRef.current) {
      observerRef.current.disconnect();
    }
    if (targetElement) {
      observerRef.current = new IntersectionObserver(([entry]) => setIsIntersecting(entry.isIntersecting));
      observerRef.current.observe(targetElement);
    }
  }, []);
  return { ref, isIntersecting };
}

// node_modules/@cloudscape-design/components/internal/context/reset-contexts-for-modal.js
var import_react2 = __toESM(require_react());
var ResetContextsForModal = ({ children }) => import_react2.default.createElement(
  AppLayoutContext.Provider,
  { value: defaultValue3 },
  import_react2.default.createElement(
    ButtonContext.Provider,
    { value: { onClick: () => {
    } } },
    import_react2.default.createElement(
      CollectionLabelContext.Provider,
      { value: { assignId: () => {
      } } },
      import_react2.default.createElement(
        FormFieldContext.Provider,
        { value: {} },
        import_react2.default.createElement(
          InfoLinkLabelContext.Provider,
          { value: "" },
          import_react2.default.createElement(
            LinkDefaultVariantContext.Provider,
            { value: defaultValue2 },
            import_react2.default.createElement(SingleTabStopNavigationContext.Provider, { value: defaultValue }, children)
          )
        )
      )
    )
  )
);
var reset_contexts_for_modal_default = ResetContextsForModal;

// node_modules/@cloudscape-design/components/modal/internal.js
function InternalModal(_a) {
  var { modalRoot } = _a, rest = __rest(_a, ["modalRoot"]);
  return import_react3.default.createElement(
    Portal,
    { container: modalRoot },
    import_react3.default.createElement(InnerModal, Object.assign({}, rest))
  );
}
function InnerModal(_a) {
  var _b;
  var { size, visible, header, children, footer, disableContentPaddings, onDismiss, __internalRootRef = null } = _a, rest = __rest(_a, ["size", "visible", "header", "children", "footer", "disableContentPaddings", "onDismiss", "__internalRootRef"]);
  const instanceUniqueId = useUniqueId();
  const headerId = `${rest.id || instanceUniqueId}-header`;
  const lastMouseDownElementRef = (0, import_react3.useRef)(null);
  const [breakpoint, breakpointsRef] = useContainerBreakpoints(["xs"]);
  const i18n = useInternalI18n("modal");
  const closeAriaLabel = i18n("closeAriaLabel", rest.closeAriaLabel);
  const refObject = (0, import_react3.useRef)(null);
  const mergedRef = useMergeRefs(breakpointsRef, refObject, __internalRootRef);
  const isRefresh = useVisualRefresh();
  const baseProps = getBaseProps(rest);
  (0, import_react3.useEffect)(() => {
    return () => {
      enableBodyScrolling();
    };
  }, []);
  (0, import_react3.useEffect)(() => {
    if (visible) {
      disableBodyScrolling();
    } else {
      enableBodyScrolling();
    }
  }, [visible]);
  (0, import_react3.useEffect)(() => {
    if (visible && refObject.current) {
      refObject.current.scrollTop = 0;
    }
  }, [visible]);
  const dismiss = (reason) => fireNonCancelableEvent(onDismiss, { reason });
  const onOverlayMouseDown = (event) => {
    lastMouseDownElementRef.current = event.target;
  };
  const onOverlayClick = (event) => {
    const overlay = refObject.current;
    const lastClicked = lastMouseDownElementRef.current;
    if (event.target === overlay && lastClicked === overlay) {
      dismiss("overlay");
    }
  };
  const onCloseButtonClick = () => dismiss("closeButton");
  const escKeyHandler = (event) => {
    if (event.keyCode === KeyCode.escape) {
      dismiss("keyboard");
    }
  };
  const { ref: stickySentinelRef, isIntersecting: footerStuck } = useIntersectionObserver();
  const [footerHeight, footerRef] = useContainerQuery((rect) => rect.borderBoxHeight);
  const { subStepRef } = useFunnelSubStep();
  return import_react3.default.createElement(
    FunnelNameSelectorContext.Provider,
    { value: `.${styles_css_default["header--text"]}` },
    import_react3.default.createElement(
      reset_contexts_for_modal_default,
      null,
      import_react3.default.createElement(
        ModalContext.Provider,
        { value: { isInModal: true } },
        import_react3.default.createElement(
          "div",
          Object.assign({}, baseProps, { className: clsx_m_default(styles_css_default.root, { [styles_css_default.hidden]: !visible }, baseProps.className, isRefresh && styles_css_default.refresh), role: "dialog", "aria-modal": true, "aria-labelledby": headerId, onMouseDown: onOverlayMouseDown, onClick: onOverlayClick, ref: mergedRef, style: footerHeight ? { scrollPaddingBottom: footerHeight } : void 0, "data-awsui-referrer-id": (_b = subStepRef.current) === null || _b === void 0 ? void 0 : _b.id }),
          import_react3.default.createElement(
            focus_lock_default,
            { disabled: !visible, autoFocus: true, restoreFocus: true, className: styles_css_default["focus-lock"] },
            import_react3.default.createElement(
              "div",
              { className: clsx_m_default(styles_css_default.dialog, styles_css_default[size], styles_css_default[`breakpoint-${breakpoint}`], isRefresh && styles_css_default.refresh), onKeyDown: escKeyHandler },
              import_react3.default.createElement(
                "div",
                { className: styles_css_default.container },
                import_react3.default.createElement(
                  "div",
                  { className: styles_css_default.header },
                  import_react3.default.createElement(
                    InternalHeader,
                    { variant: "h2", __disableActionsWrapping: true, actions: import_react3.default.createElement(InternalButton, { ariaLabel: closeAriaLabel, className: styles_css_default["dismiss-control"], variant: "modal-dismiss", iconName: "close", formAction: "none", onClick: onCloseButtonClick }) },
                    import_react3.default.createElement("span", { id: headerId, className: styles_css_default["header--text"] }, header)
                  )
                ),
                import_react3.default.createElement(
                  "div",
                  { className: clsx_m_default(styles_css_default.content, { [styles_css_default["no-paddings"]]: disableContentPaddings }) },
                  children,
                  import_react3.default.createElement("div", { ref: stickySentinelRef })
                ),
                footer && import_react3.default.createElement("div", { ref: footerRef, className: clsx_m_default(styles_css_default.footer, footerStuck && styles_css_default["footer--stuck"]) }, footer)
              )
            )
          )
        )
      )
    )
  );
}

export {
  reset_contexts_for_modal_default,
  InternalModal
};
//# sourceMappingURL=chunk-JH4U53LA.js.map
