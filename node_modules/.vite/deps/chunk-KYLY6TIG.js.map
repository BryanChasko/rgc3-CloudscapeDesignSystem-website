{
  "version": 3,
  "sources": ["../../src/internal/context/single-tab-stop-navigation-context.tsx"],
  "sourcesContent": ["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { createContext, useContext, useEffect, useState } from 'react';\n\nexport type FocusableChangeHandler = (isFocusable: boolean) => void;\n\nexport interface SingleTabStopNavigationOptions {\n  tabIndex?: number;\n}\n\nexport const defaultValue: {\n  navigationActive: boolean;\n  registerFocusable(focusable: Element, handler: FocusableChangeHandler): () => void;\n} = {\n  navigationActive: false,\n  registerFocusable: () => () => {},\n};\n\n/**\n * Single tab stop navigation context is used together with keyboard navigation that requires a single tab stop.\n * It instructs interactive elements to override tab indices for just a single one to remain user-focusable.\n */\nexport const SingleTabStopNavigationContext = createContext(defaultValue);\n\nexport function useSingleTabStopNavigation(\n  focusable: null | React.RefObject<Element>,\n  options?: { tabIndex?: number }\n) {\n  const { navigationActive: contextNavigationActive, registerFocusable } = useContext(SingleTabStopNavigationContext);\n  const [focusTargetActive, setFocusTargetActive] = useState(false);\n  const navigationDisabled = options?.tabIndex && options?.tabIndex < 0;\n  const navigationActive = contextNavigationActive && !navigationDisabled;\n\n  useEffect(() => {\n    if (navigationActive && focusable && focusable.current) {\n      const unregister = registerFocusable(focusable.current, isFocusable => setFocusTargetActive(isFocusable));\n      return () => unregister();\n    }\n  });\n\n  let tabIndex = options?.tabIndex;\n  if (navigationActive) {\n    tabIndex = !focusTargetActive ? -1 : options?.tabIndex ?? 0;\n  }\n\n  return { navigationActive, tabIndex };\n}\n"],
  "mappings": ";;;;;;AAGA,mBAA+D;AAQxD,IAAM,eAGT;EACF,kBAAkB;EAClB,mBAAmB,MAAM,MAAK;EAAE;;AAO3B,IAAM,qCAAiC,4BAAc,YAAY;AAElE,SAAU,2BACd,WACA,SAA+B;;AAE/B,QAAM,EAAE,kBAAkB,yBAAyB,kBAAiB,QAAK,yBAAW,8BAA8B;AAClH,QAAM,CAAC,mBAAmB,oBAAoB,QAAI,uBAAS,KAAK;AAChE,QAAM,sBAAqB,YAAO,QAAP,YAAO,SAAA,SAAP,QAAS,cAAY,YAAO,QAAP,YAAO,SAAA,SAAP,QAAS,YAAW;AACpE,QAAM,mBAAmB,2BAA2B,CAAC;AAErD,8BAAU,MAAK;AACb,QAAI,oBAAoB,aAAa,UAAU,SAAS;AACtD,YAAM,aAAa,kBAAkB,UAAU,SAAS,iBAAe,qBAAqB,WAAW,CAAC;AACxG,aAAO,MAAM,WAAU;;EAE3B,CAAC;AAED,MAAI,WAAW,YAAO,QAAP,YAAO,SAAA,SAAP,QAAS;AACxB,MAAI,kBAAkB;AACpB,eAAW,CAAC,oBAAoB,MAAK,KAAA,YAAO,QAAP,YAAO,SAAA,SAAP,QAAS,cAAQ,QAAA,OAAA,SAAA,KAAI;;AAG5D,SAAO,EAAE,kBAAkB,SAAQ;AACrC;",
  "names": []
}
