{
  "version": 3,
  "sources": ["../../src/link/internal.tsx", "../../@cloudscape-design/components/link/styles.css.js"],
  "sourcesContent": ["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useContext, useRef } from 'react';\nimport clsx from 'clsx';\nimport InternalIcon from '../icon/internal';\nimport styles from './styles.css.js';\nimport { getBaseProps } from '../internal/base-component';\nimport { fireCancelableEvent, isPlainLeftClick } from '../internal/events';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport { KeyCode } from '../internal/keycode';\nimport { LinkProps } from './interfaces';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { checkSafeUrl } from '../internal/utils/check-safe-url';\nimport { useInternalI18n } from '../i18n/context';\nimport { InfoLinkLabelContext } from '../internal/context/info-link-label-context';\nimport { useFunnel, useFunnelStep, useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\n\nimport { FunnelMetrics } from '../internal/analytics';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport {\n  DATA_ATTR_FUNNEL_VALUE,\n  getFunnelValueSelector,\n  getNameFromSelector,\n  getSubStepAllSelector,\n} from '../internal/analytics/selectors';\nimport { LinkDefaultVariantContext } from '../internal/context/link-default-variant-context';\nimport { useSingleTabStopNavigation } from '../internal/context/single-tab-stop-navigation-context';\n\ntype InternalLinkProps = InternalBaseComponentProps<HTMLAnchorElement> &\n  Omit<LinkProps, 'variant'> & {\n    variant?: LinkProps['variant'] | 'top-navigation' | 'link' | 'recovery';\n  };\n\nconst InternalLink = React.forwardRef(\n  (\n    {\n      variant: providedVariant,\n      fontSize = 'body-m',\n      color = 'normal',\n      external = false,\n      target,\n      href,\n      rel,\n      ariaLabel,\n      externalIconAriaLabel,\n      onFollow,\n      children,\n      __internalRootRef = null,\n      ...props\n    }: InternalLinkProps,\n    ref: React.Ref<LinkProps.Ref>\n  ) => {\n    checkSafeUrl('Link', href);\n    const isButton = !href;\n    const { defaultVariant } = useContext(LinkDefaultVariantContext);\n    const variant = providedVariant || defaultVariant;\n    const specialStyles = ['top-navigation', 'link', 'recovery'];\n    const hasSpecialStyle = specialStyles.indexOf(variant) > -1;\n\n    const i18n = useInternalI18n('link');\n    const baseProps = getBaseProps(props);\n    const anchorTarget = target ?? (external ? '_blank' : undefined);\n    const anchorRel = rel ?? (anchorTarget === '_blank' ? 'noopener noreferrer' : undefined);\n    const uniqueId = useUniqueId('link');\n    const linkId = useUniqueId('link-self');\n    const infoId = useUniqueId('link-info');\n\n    const infoLinkLabelFromContext = useContext(InfoLinkLabelContext);\n\n    const { funnelInteractionId } = useFunnel();\n    const { stepNumber, stepNameSelector } = useFunnelStep();\n    const { subStepSelector, subStepNameSelector } = useFunnelSubStep();\n\n    const fireFunnelEvent = (funnelInteractionId: string) => {\n      if (variant === 'info') {\n        const stepName = getNameFromSelector(stepNameSelector);\n        const subStepName = getNameFromSelector(subStepNameSelector);\n\n        FunnelMetrics.helpPanelInteracted({\n          funnelInteractionId,\n          stepNumber,\n          stepName,\n          stepNameSelector,\n          subStepSelector,\n          subStepName,\n          subStepNameSelector,\n          elementSelector: getFunnelValueSelector(uniqueId),\n          subStepAllSelector: getSubStepAllSelector(),\n        });\n      } else if (external) {\n        const stepName = getNameFromSelector(stepNameSelector);\n        const subStepName = getNameFromSelector(subStepNameSelector);\n\n        FunnelMetrics.externalLinkInteracted({\n          funnelInteractionId,\n          stepNumber,\n          stepName,\n          stepNameSelector,\n          subStepSelector,\n          subStepName,\n          subStepNameSelector,\n          elementSelector: getFunnelValueSelector(uniqueId),\n          subStepAllSelector: getSubStepAllSelector(),\n        });\n      }\n    };\n\n    const fireFollowEvent = (event: React.SyntheticEvent) => {\n      if (funnelInteractionId) {\n        fireFunnelEvent(funnelInteractionId);\n      }\n\n      fireCancelableEvent(onFollow, { href, external, target: anchorTarget }, event);\n    };\n\n    const handleLinkClick = (event: React.MouseEvent) => {\n      if (isPlainLeftClick(event)) {\n        fireFollowEvent(event);\n      }\n    };\n\n    const handleButtonClick = (event: React.MouseEvent) => {\n      fireFollowEvent(event);\n    };\n\n    const handleButtonKeyDown = (event: React.KeyboardEvent) => {\n      if (event.keyCode === KeyCode.space || event.keyCode === KeyCode.enter) {\n        event.preventDefault();\n        fireFollowEvent(event);\n      }\n    };\n\n    const linkRef = useRef<HTMLElement>(null);\n    const isVisualRefresh = useVisualRefresh();\n    useForwardFocus(ref, linkRef);\n\n    // Visual refresh should only add styles to buttons that don't already have unique styles (e.g. primary/secondary variants)\n    const applyButtonStyles = isButton && isVisualRefresh && !hasSpecialStyle;\n\n    const sharedProps = {\n      id: linkId,\n      ...baseProps,\n      // https://github.com/microsoft/TypeScript/issues/36659\n      ref: useMergeRefs(linkRef, __internalRootRef),\n      className: clsx(\n        styles.link,\n        baseProps.className,\n        applyButtonStyles ? styles.button : null,\n        styles[getVariantStyle(variant)],\n        styles[getFontSizeStyle(variant, fontSize)],\n        styles[getColorStyle(variant, color)]\n      ),\n      'aria-label': ariaLabel,\n      'aria-labelledby': '',\n      [DATA_ATTR_FUNNEL_VALUE]: uniqueId,\n    };\n\n    if (variant === 'info' && infoLinkLabelFromContext && !ariaLabel) {\n      sharedProps['aria-labelledby'] = `${sharedProps.id} ${infoId} ${infoLinkLabelFromContext}`;\n    }\n\n    const renderedExternalIconAriaLabel = i18n('externalIconAriaLabel', externalIconAriaLabel);\n    const content = (\n      <>\n        {children}\n        {external && (\n          <span className={styles['icon-wrapper']}>\n            &nbsp;\n            <span\n              className={styles.icon}\n              aria-label={renderedExternalIconAriaLabel}\n              role={renderedExternalIconAriaLabel ? 'img' : undefined}\n            >\n              <InternalIcon name=\"external\" size=\"inherit\" />\n            </span>\n          </span>\n        )}\n        {variant === 'info' && (\n          <span hidden={true} id={infoId}>\n            :\n          </span>\n        )}\n      </>\n    );\n\n    const { tabIndex } = useSingleTabStopNavigation(linkRef, { tabIndex: isButton ? 0 : undefined });\n\n    if (isButton) {\n      return (\n        <a\n          {...sharedProps}\n          role=\"button\"\n          tabIndex={tabIndex}\n          onKeyDown={handleButtonKeyDown}\n          onClick={handleButtonClick}\n        >\n          {content}\n        </a>\n      );\n    }\n\n    return (\n      // we dynamically set proper rel in the code above\n      // eslint-disable-next-line react/jsx-no-target-blank\n      <a\n        {...sharedProps}\n        tabIndex={tabIndex}\n        target={anchorTarget}\n        rel={anchorRel}\n        href={href}\n        onClick={handleLinkClick}\n      >\n        {content}\n      </a>\n    );\n  }\n);\n\nfunction getVariantStyle(variant: Exclude<InternalLinkProps['variant'], undefined>) {\n  return `variant-${variant.replace(/^awsui-/, '')}`;\n}\n\nfunction getFontSizeStyle(variant: InternalLinkProps['variant'], fontSize: InternalLinkProps['fontSize']) {\n  switch (variant) {\n    case 'info':\n      return 'font-size-body-s';\n    case 'awsui-value-large':\n      return 'font-size-display-l';\n    default:\n      return `font-size-${fontSize}`;\n  }\n}\n\nfunction getColorStyle(variant: InternalLinkProps['variant'], color: InternalLinkProps['color']) {\n  return `color-${variant === 'info' ? 'normal' : color}`;\n}\n\nexport default InternalLink;\n", "\n    import './styles.scoped.css';\n    export default {\n  \"link\": \"awsui_link_4c84z_i6aqa_99\",\n  \"variant-secondary\": \"awsui_variant-secondary_4c84z_i6aqa_168\",\n  \"variant-primary\": \"awsui_variant-primary_4c84z_i6aqa_203\",\n  \"variant-info\": \"awsui_variant-info_4c84z_i6aqa_236\",\n  \"variant-value-large\": \"awsui_variant-value-large_4c84z_i6aqa_271\",\n  \"variant-top-navigation\": \"awsui_variant-top-navigation_4c84z_i6aqa_303\",\n  \"variant-recovery\": \"awsui_variant-recovery_4c84z_i6aqa_336\",\n  \"button\": \"awsui_button_4c84z_i6aqa_369\",\n  \"color-inverted\": \"awsui_color-inverted_4c84z_i6aqa_404\",\n  \"font-size-body-s\": \"awsui_font-size-body-s_4c84z_i6aqa_425\",\n  \"font-size-body-m\": \"awsui_font-size-body-m_4c84z_i6aqa_432\",\n  \"font-size-heading-xs\": \"awsui_font-size-heading-xs_4c84z_i6aqa_438\",\n  \"font-size-heading-s\": \"awsui_font-size-heading-s_4c84z_i6aqa_444\",\n  \"font-size-heading-m\": \"awsui_font-size-heading-m_4c84z_i6aqa_451\",\n  \"font-size-heading-l\": \"awsui_font-size-heading-l_4c84z_i6aqa_458\",\n  \"font-size-heading-xl\": \"awsui_font-size-heading-xl_4c84z_i6aqa_465\",\n  \"font-size-display-l\": \"awsui_font-size-display-l_4c84z_i6aqa_472\",\n  \"font-size-inherit\": \"awsui_font-size-inherit_4c84z_i6aqa_479\",\n  \"icon-wrapper\": \"awsui_icon-wrapper_4c84z_i6aqa_491\",\n  \"icon\": \"awsui_icon_4c84z_i6aqa_491\"\n};\n  "],
  "mappings": "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",
  "names": ["React", "funnelInteractionId", "internal_default"]
}
